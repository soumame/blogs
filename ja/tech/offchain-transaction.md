---
title: ブロックチェーンを使わないビットコイン取引をする方法(オフチェーン)
emoji: 🤖
tags:
  - crypto
published_at: 2023-05-09
---

# ブロックチェーンを使わないビットコイン取引をする方法(オフチェーン)

> この記事はだいぶ前に書いた記事を再アップロードしたものです。

仮想通貨と聞くと、ブロックチェーンを思い浮かべる人は多いのではないでしょうか。最近ブロックチェーンを使わない取引について調べたので、まとめてみました。

## ブロックチェーンとは
ブロックチェーンは、現実世界で簡単に説明すると...

[![Image from Gyazo](https://i.gyazo.com/9713f36f1f5ee01a3ecf8e13bc08659a.png)](https://gyazo.com/9713f36f1f5ee01a3ecf8e13bc08659a)

こんな感じ。

まずAさんがBさんと取引をします。

その取引は正しく行われたため、記録をつけないといけません。

付けた記録は非常に大切で、盗まれたら大惨事。そこで、世界中にあるたくさんの金庫を使って、そのうちのどれか複数に、取引記録を入れておくことにします。

金庫は強化ガラスでできているので、みんなが見ることができます。

これによって、取引記録の改ざんは難しくなりました。めでたしめでたし。

...というふうに、こうやってブロックチェーンを使うことを、オンチェーンと言います。

え？オンがあるならオフもある？

大丈夫。　ちゃんとあるよ。

## オフチェーンとは何か
さて、ここからが本題です。オフチェーンとは何か。

オフチェーンは、さっき説明したブロックチェーンを使わない取引のやり方です。

記録は内部のデータベースに保存されます。つまり、これだけではセキュリティの点では圧倒的に劣ります。しかし、いちいちブロックチェーンに保存しない分、取引のスピードはかなり早くなります。１０~２０分くらいかかっていたのが、数秒で終わったりします。

[![Image from Gyazo](https://i.gyazo.com/7dfd830ae8c57ca3ce21ba993c1f51c7.png)](https://gyazo.com/7dfd830ae8c57ca3ce21ba993c1f51c7)

それでもやっぱり何もしないと危険なので、暗号化技術を取り入れます。ペイメントチャネルというものを作り、その部屋にはAさんBさんCさんがいます。全員が鍵を持っており、３人いないと取引は成立しません。このペイメントチャネルを始めた時、Aさんが10000円、Bさんが10000円持っていて、取引が成立すると、内部の分配比率が変わります。Aさん０円、Bさん20000円というふうに。最後にこの分配比率をブロックチェーンにアップロードすることで、手数料はほんのわずかで済むし、早く送金できます。

## オフチェーンの応用例その１
取引所などでは、一秒間に無数の取引を行います。仮想通貨の価値はすぐに変動するため、できるだけ早く取引を行うことが無難です。また、ブロックチェーンにアップロードしたデータは削除が困難なため、個人情報を間違ってアップロードしたら、取り返しがつきません。そのため、仮想通貨の取引所では、最終的な結果だけをブロックチェーンにアップロードすることにしたようです。

## オフチェーンの応用例その２
最近私が使っているのが、ライトニングウォレットというものなのですが、これもまたオフチェーンを使っています。名前にライトニングがついただけじゃん！と思うかもしれませんが、全くの別物と考えた方がいいと思います。ウォレットはいちいち取引を記録するのに対し、これは最終結果しか記録しません。少額を送信するのであればこっちの方が好都合です。

オフチェーン取引のいいところは、手数料が少ないことと、素早く送信できることです。

オンチェーンは誰かがマイニングをして作ったブロックチェーンに保存するので、マイニングした人にお金を払わなきゃいけません。なので、手数料がかかるのです。

しかし、ただオフチェーンなだけだと、改ざんされる危険性があるので、暗号化技術を使ってセキュリティを保っています。